## セキュリティ調査
### ■アプリケーション脆弱性
WEBサイトへの攻撃と思われる通信の約90％が海外からで、攻撃のほとんどは自動化されたものだと思われる  
そのため、企業の知名度やサイトの大小は関係なく、ほぼ全てのサイトに対して行なわれるものだと思った方がいい  

* WEBアプリケーションの実装の仕方により欠陥が発生するもの  
* WAF（Scutumなど）で防ぐことが可能

<hr>

### 主なセキュリティ対策
### ■SSL（HTTPS）
主に通信を盗聴されないようにするもの  
→SSL通信はどのクライアントからでもできるため、悪意を持ったユーザでも利用が可能  

### ■ファイアウォール（セキュリティグループ、ACL、ルートテーブル）
接続元を制限するもの  
→通信の中身までは制限できないため、不正な内容の通信は制限できない  

### ■データ暗号化（EBS暗号化、RDS暗号化）
データ盗難対策。データを暗号化してストレージに保存する技術。  
複合化するルートを通って接続されなければデータが読み取れる状態にならないため、
ウィルスや不正アクセスでデータを抽出されてもデータの読み取りを防げる可能性がある。  
→WEBアプリケーションの脆弱性を利用されたアクセスの場合、複合化されて盗難されてしまう可能性がある  

### ■Web Application Firewall(Scutumなど)
WEBアプリケーション脆弱性への攻撃をブロックするもの

<hr>

### セキュリティ対策ツール
### ■DeepSecurity（サーバセキュリティソフト）
統合型サーバセキュリティソリューション  
IDS/IPS（侵入検知および防止）、変更監視、不正プログラム対策、アンチウィルス  
サーバ（EC2）にエージェントをインストールし、マネージャーでルールの管理と監視が出来る。  
→ルールの設定の検討などを設計をする  

<hr>

### 攻撃手法
### ■SQLインジェクション
* アプリケーションが想定しないSQL文を実行させることにより、データベースシステムを不正に操作する攻撃方法
* 入力値を適切にエスケープしないままSQL中に展開することで発生する  
`SELECT * FROM users WHERE name = '（入力値）';`  
`t' OR 't' = 't`を入力するとusersテーブルを全権取得できてしまう  
`SELECT * FROM users WHERE name = 't' OR 't' = 't';`
* プリペアードステートメント（およびパラメータ化クエリ）  
  ストアドプロシージャ  
  すべてのユーザからの入力をエスケープ  
することで対策を行う

### ■クロスサイトスクリプティング（XSS）
* HTMLを生成する際に文字列がエスケープされておらず、攻撃者によって作成されたHTMLタグやJavaScriptが利用者のブラウザ上で表示、実行される脆弱性
* 1.HTTP レスポンスヘッダーに文字コードを指定する  
2.HTML 要素の属性は""(ダブルクオーテーション)で囲む  
3.出力する全ての要素に対してエスケープ処理を行う  
4.URL は「http://」か「https://」で始まるもののみ出力する  
5.<script></script> 要素の内容を動的に生成しない

### ■クロスサイトリクエストフォージェリ（CSRF）
* 攻撃対象のWebアプリケーションに任意の処理を行わせることができる
* サイト外からのリクエストを受信、処理しないようにシステムを作りこむ
* 攻撃者に推測されにくい任意の情報を照合する処理を実装する。照合に使う任意の情報の例としては、セッションID、ページトークン、ランダムな数字など
* 入力ページに乱数を埋め込んでおき、サーバ側で存在と一致を確かめる
